<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KMV Cheatsheet</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0; /* Remove body padding, will be handled by container */
            background-color: #121212; /* Dark background */
            color: #e0e0e0; /* Light text color for body */
            line-height: 1.6;
        }
        .container {
            max-width: 800px;
            margin: 40px auto; /* Center container and add top/bottom margin */
            padding: 20px;
            background-color: #1e1e1e; /* Slightly lighter dark for content area */
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        h1 {
            color: #ffffff; /* Bright white for headings */
            text-align: center;
            margin-bottom: 30px;
        }
        h3 {
            color: #bb86fc; /* Accent color for subheadings */
            text-align: center;
            margin-bottom: 20px;
        }
        .instructions-section h3 { /* More specific selector for instruction heading */
            text-align: left;
            margin-bottom: 15px;
            color: #e0e0e0; /* Lighter color for instruction heading */
        }
        .instructions-section ul {
            list-style-type: decimal; /* Numbered list */
            padding-left: 20px; /* Indent list items */
            margin-bottom: 25px;
        }
        .instructions-section li {
            color: #c0c0c0;
            margin-bottom: 8px;
        }
        .instructions-section code { /* Style for inline code in instructions */
            background-color: #2c2c2c;
            color: #d4d4d4;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: 'Courier New', Courier, monospace;
        }
        p {
            color: #c0c0c0; /* Slightly dimmer light color for paragraphs */
            margin-bottom: 10px; /* Adjusted margin */
        }
        .code-block-wrapper {
            position: relative; /* For positioning the copy button */
            margin-bottom: 20px; /* Add some space below pre */
        }
        pre {
            background-color: #2c2c2c; /* Darker background for code blocks */
            color: #d4d4d4; /* Light text for code */
            padding: 15px;
            padding-right: 60px; /* Make space for the copy button */
            border-radius: 5px;
            border: 1px solid #333; /* Subtle border */
            overflow-x: auto; /* Handle long lines of code */
            font-family: 'Courier New', Courier, monospace;
            margin-top: 5px; /* Add some space above pre */
            /* margin-bottom removed as it's on wrapper now */
        }
        .copy-button {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #bb86fc;
            color: #121212;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8em;
            transition: background-color 0.2s ease;
        }
        .copy-button:hover {
            background-color: #a06cd5;
        }
        /* Add a style for links if you plan to have them */
        a {
            color: #bb86fc; /* A modern accent color for links */
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        label {
            color: #c0c0c0;
            margin-right: 10px;
        }
        select {
            background-color: #2c2c2c;
            color: #d4d4d4;
            border: 1px solid #333;
            padding: 8px;
            border-radius: 5px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-width: 100px; /* Ensure dropdowns have a decent width */
        }
        .controls {
            margin-bottom: 25px;
            text-align: center; /* Center the dropdown */
            display: flex; /* Align label and select nicely */
            justify-content: center;
            align-items: center;
            gap: 10px; /* Space between items in controls */
        }
        .subject-controls { /* Specific class for subject controls if needed for spacing */
            margin-bottom: 15px;
        }
        .question-controls { /* Specific class for question controls */
            margin-bottom: 25px;
        }
        footer {
            text-align: center;
            margin-top: 40px;
            color: #c0c0c0;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>KMV Cheatsheet</h1>

        <div class="instructions-section">
            <h3>How to Get Your Program Files:</h3>
            <ul>
                <li>Press the <code>Windows Key</code> + <code>R</code> on your keyboard simultaneously. This will open the "Run" dialog box.</li>
                <li>In the "Run" dialog box, type <code>cmd</code> and press <code>Enter</code> or click "OK". This will open the Command Prompt (a black window where you can type commands).</li>
                <li>In the Command Prompt, type <code>cd Desktop</code> (make sure 'D' in Desktop is capitalized if your folder is named that way) and press <code>Enter</code>. This command changes your current location in the Command Prompt to your Desktop folder.</li>
                <li>Next, type <code>code .</code> (that's 'code', then a space, then a period) and press <code>Enter</code>. This command will attempt to open your Desktop folder in Visual Studio Code (VS Code). If VS Code isn't installed or not in your system's PATH, this step might not work as expected. You can skip this if you just want the files.</li>
                <li>Select the subject and question number from the dropdowns below to generate the correct command.</li>
                <li>Copy the command shown under "To place it inside a file..." by clicking the "Copy" button next to it.</li>
                <li>Go back to the Command Prompt window (that you opened in step 2, which should now be in your Desktop directory).</li>
                <li>Right-click inside the Command Prompt window to paste the copied command, or press <code>Ctrl</code> + <code>V</code>. Then press <code>Enter</code>.</li>
                <li>After pressing <code>Enter</code>, the command will run. It will download the question file and save it directly to your Desktop with the name shown in the command (e.g., <code>q1.py</code>).</li>
            </ul>
        </div>

        <div class="controls subject-controls">
            <label for="subjectSelect">Select Subject:</label>
            <select id="subjectSelect">
                <!-- Options will be populated by JavaScript -->
            </select>
        </div>

        <div class="controls question-controls">
            <label for="questionNumber">Select Question Number:</label>
            <select id="questionNumber">
                <!-- Options will be populated by JavaScript -->
            </select>
        </div>

        <p>Run the following code to get questions on the terminal:</p>
        <div class="code-block-wrapper">
            <pre id="curlCommandTerminal"></pre>
            <button class="copy-button" data-target-id="curlCommandTerminal">Copy</button>
        </div>

        <p>To place it inside a file, run the following command:</p>
        <div class="code-block-wrapper">
            <pre id="curlCommandFile"></pre>
            <button class="copy-button" data-target-id="curlCommandFile">Copy</button>
        </div>

        <p>Or, view the question directly in your browser at this URL:</p>
        <div class="code-block-wrapper">
            <pre id="browserUrlDisplay"></pre>
            <button class="copy-button" data-target-id="browserUrlDisplay">Copy</button>
        </div>
    </div>

    <!-- add credits -->
    <footer>
        <p>Made with ❤️ by Elon Musk Ka Bhai</p>
    </footer>

    <script>
        const subjectSelect = document.getElementById('subjectSelect');
        const questionSelect = document.getElementById('questionNumber');
        const curlTerminalPre = document.getElementById('curlCommandTerminal');
        const curlFilePre = document.getElementById('curlCommandFile');
        const browserUrlPre = document.getElementById('browserUrlDisplay'); 
        const copyButtons = document.querySelectorAll('.copy-button');

        const subjectsData = {
            "DMS": {
                baseUrl: "https://kmvsem2.vercel.app/dms/",
                maxQuestions: 8,
                filePrefix: "q"
            },
            "CPP": {
                baseUrl: "https://kmvsem2.vercel.app/cpp/",
                maxQuestions: 8,
                filePrefix: "p_"
            }
            // Add more subjects here
        };

        function updateCommands() {
            const selectedSubjectKey = subjectSelect.value;
            const selectedQuestionNum = questionSelect.value;
            const subjectInfo = subjectsData[selectedSubjectKey];

            if (!subjectInfo || !selectedQuestionNum) {
                curlTerminalPre.textContent = "Please select a subject and question.";
                curlFilePre.textContent = "";
                browserUrlPre.textContent = ""; // Clear browser URL too
                return;
            }

            curlTerminalPre.textContent = `curl ${subjectInfo.baseUrl}${selectedQuestionNum}`;
            curlFilePre.textContent = `curl ${subjectInfo.baseUrl}${selectedQuestionNum} -o ${subjectInfo.filePrefix}${selectedQuestionNum}.py`;
            browserUrlPre.textContent = `${subjectInfo.baseUrl}${selectedQuestionNum}/read`; // Set browser URL
        }

        function populateQuestionDropdown(subjectKey) {
            const subjectInfo = subjectsData[subjectKey];
            questionSelect.innerHTML = ''; // Clear existing options

            if (!subjectInfo) return;

            for (let i = 1; i <= subjectInfo.maxQuestions; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i;
                questionSelect.appendChild(option);
            }
            // Ensure the first question is selected by default if available
            if (questionSelect.options.length > 0) {
                questionSelect.value = questionSelect.options[0].value;
            }
        }

        function populateSubjectDropdown() {
            for (const key in subjectsData) {
                const option = document.createElement('option');
                option.value = key;
                option.textContent = key;
                subjectSelect.appendChild(option);
            }
        }

        // Initial setup
        populateSubjectDropdown();
        // Set initial subject and populate its questions
        if (subjectSelect.options.length > 0) {
            subjectSelect.value = subjectSelect.options[0].value; // Select the first subject by default
            populateQuestionDropdown(subjectSelect.value);
        }
        updateCommands(); // Update commands for the default selection

        // Set initial text for the "Open Link" button
        copyButtons.forEach(button => {
            if (button.getAttribute('data-target-id') === 'browserUrlDisplay') {
                button.textContent = 'Open Link';
            }
        });

        // Event Listeners
        subjectSelect.addEventListener('change', function() {
            populateQuestionDropdown(this.value);
            updateCommands();
        });

        questionSelect.addEventListener('change', function() {
            updateCommands();
        });

        copyButtons.forEach(button => {
            button.addEventListener('click', () => {
                const targetId = button.getAttribute('data-target-id');
                const targetPre = document.getElementById(targetId);
                if (targetPre) {
                    if (targetId === 'browserUrlDisplay') {
                        // Action for "Open Link" button
                        if (targetPre.textContent && targetPre.textContent !== "Please select a subject and question.") {
                            window.open(targetPre.textContent, '_blank');
                        }
                    } else {
                        // Action for other "Copy" buttons
                        navigator.clipboard.writeText(targetPre.textContent)
                            .then(() => {
                                const originalText = button.textContent; // Should be "Copy"
                                button.textContent = 'Copied!';
                                setTimeout(() => {
                                    button.textContent = originalText;
                                }, 1500); // Revert after 1.5 seconds
                            })
                            .catch(err => {
                                console.error('Failed to copy: ', err);
                                // You could add user feedback here for the error case
                            });
                    }
                }
            });
        });
    </script>
</body>
</html>